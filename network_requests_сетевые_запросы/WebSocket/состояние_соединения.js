// –ß—Ç–æ–±—ã ‚Å°‚Å£‚Å£‚Å¢–ø–æ–ª—É—á–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏‚Å°—è, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ ‚Å°‚Å¢‚Å£‚Å£socket.readyState‚Å° —Å–æ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏:

// ‚Å°‚Å£‚Å¢‚Å£0‚Å° ‚Äì ¬´CONNECTING¬ª: —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –µ—â—ë –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ,
// ‚Å°‚Å£‚Å¢‚Å£1‚Å° ‚Äì ¬´OPEN¬ª: –æ–±–º–µ–Ω –¥–∞–Ω–Ω—ã–º–∏,
// ‚Å°‚Å£‚Å¢‚Å£2‚Å° ‚Äì ¬´CLOSING¬ª: —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è,
// ‚Å°‚Å£‚Å¢‚Å£3‚Å° ‚Äì ¬´CLOSED¬ª: —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∑–∞–∫—Ä—ã—Ç–æ.

const socket = new WebSocket('wss://javascript.info/article/websocket/demo/hello');

console.log(socket.readyState) // 0

socket.onopen = () => {
  console.log(socket.readyState) // 1
  socket.send('–ú–µ–Ω—è –∑–æ–≤—É—Ç –ú–∞–∫—Å–∏–º')
}

socket.onmessage = (e) => {
  console.log(socket.readyState) // 1
  console.log(`–ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ —Å —Å–µ—Ä–≤–µ—Ä–∞: ${e.data}`)
}

setTimeout(() => socket.close(), 3000)

socket.onclose = () => {
  console.log(socket.readyState) // 3
}

// –ù–µ–º–Ω–æ–≥–æ ‚Å°‚Å¢‚Å£‚Å¢–Ω–µ –ø–æ —Ç–µ–º–µ‚Å° –∞ –ø—Ä–æ ‚Å°‚Å¢‚Å£‚Å£—Ñ—É–Ω–∫—Ü–∏–∏ –≤—ã–∑–æ–≤–∞‚Å° 

// ‚Å°‚Å¢‚Å£‚Å£setTimeout(() => socket.close(), 3000)‚Å°‚Å°: –í —ç—Ç–æ–π –∑–∞–ø–∏—Å–∏, –≤—ã –ø–µ—Ä–µ–¥–∞–µ—Ç–µ ‚Å°‚Å£‚Å£‚Å¢–∞–Ω–æ–Ω–∏–º–Ω—É—é —Å—Ç—Ä–µ–ª–æ—á–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é‚Å° –≤ setTimeout. –ö–æ–≥–¥–∞ –≤—Ä–µ–º—è –∑–∞–¥–µ—Ä–∂–∫–∏ ‚Å°‚Å£‚Å£‚Å¢–∏—Å—Ç–µ–∫–∞–µ—Ç (3 —Å–µ–∫—É–Ω–¥—ã)‚Å°, 
// ‚Å°‚Å£‚Å£‚Å¢—ç—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –±—É–¥–µ—Ç –≤—ã–∑–≤–∞–Ω–∞‚Å°, –∏ –≤–Ω—É—Ç—Ä–∏ –Ω–µ—ë –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω –º–µ—Ç–æ–¥ socket.close(), –∫–æ—Ç–æ—Ä—ã–π –∑–∞–∫—Ä–æ–µ—Ç –≤–µ–±-—Å–æ–∫–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ.

// ‚Å°‚Å¢‚Å£‚Å£setTimeout(socket.close(), 3000)‚Å°: –í —ç—Ç–æ–π –∑–∞–ø–∏—Å–∏, –≤—ã –ø—ã—Ç–∞–µ—Ç–µ—Å—å —Å—Ä–∞–∑—É –ø–µ—Ä–µ–¥–∞—Ç—å ‚Å°‚Å£‚Å£‚Å¢—Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è‚Å° socket.close() –≤ setTimeout. 
// –û–¥–Ω–∞–∫–æ, —Ç–∞–∫–æ–π —Å–ø–æ—Å–æ–± –Ω–µ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –æ–∂–∏–¥–∞–µ–º—ã–º –æ–±—Ä–∞–∑–æ–º, –ø–æ—Ç–æ–º—É —á—Ç–æ socket.close() ‚Å°‚Å¢‚Å£‚Å¢–±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ‚Å°, 
// –∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç —ç—Ç–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (–≤–µ—Ä–æ—è—Ç–Ω–µ–µ –≤—Å–µ–≥–æ ‚Å°‚Å£‚Å£‚Å¢ùòÇùóªùó±ùó≤ùó≥ùó∂ùóªùó≤ùó±‚Å°, –µ—Å–ª–∏ –º–µ—Ç–æ–¥ close –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–∞–∫–æ–µ-–ª–∏–±–æ –∑–Ω–∞—á–µ–Ω–∏–µ) –±—É–¥–µ—Ç –ø–µ—Ä–µ–¥–∞–Ω –≤ setTimeout. 
// –í –∏—Ç–æ–≥–µ, –≤–µ–±-—Å–æ–∫–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∑–∞–∫—Ä–æ–µ—Ç—Å—è —Å—Ä–∞–∑—É –∂–µ, ‚Å°‚Å¢‚Å£‚Å¢–∞ –Ω–µ —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã‚Å°.